C51 COMPILER V8.01   TIMER_00_VASILENKO                                                    11/15/2013 12:32:45 PAGE 1   


C51 COMPILER V8.01, COMPILATION OF MODULE TIMER_00_VASILENKO
OBJECT MODULE PLACED IN timer_00_vasilenko.OBJ
COMPILER INVOKED BY: C:\Program Files\Keil3\C51\BIN\C51.EXE timer_00_vasilenko.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          //======================================================================================
   2          //               Timer_00
   3          //  Name: Jurij         Vorname: Vasilenko        Klasse: ITAM2     Datum: 15. Nov 2013                   
             -                                               
   4          //======================================================================================
   5          //******************************* Quelltextdateien *************************************
   6          #include <Reg515c.h>            // Definition der Port-Bytes usw.
   7          //********************************** Konstanten ****************************************
   8          sbit P4_0 = P4^0;
   9          //****************************** Funktionsdeklarationen ********************************
  10          void main(void);
  11          void init_seriell(void);
  12          void putchar(char ch);
  13          void printstring(char *stringanfang);
  14          void timer0(void);
  15          //******************************** Hauptprogramm ***************************************
  16          int sec, count;
  17          void main(void)
  18          {
  19   1        if(BD == 0)     // Baudratengenerator noch nicht aktiv
  20   1         init_seriell();    // serielle Kommunikation ermöglichen
  21   1            
  22   1        while(1)  // Endlos
  23   1        {
  24   2          timer0();
  25   2        }
  26   1      }
  27          //***************************** F u n k t i o n e n ************************************
  28          void init_seriell(void) 
  29            {
  30   1        SCON  = 0x50;   // SCON: mode 1, 8-bit UART, enable rcvr 
  31   1        PCON |= 0x80;         // SMOD Bit setzen 
  32   1        SRELH = 0x03;         // 9600 baud @ 10MHz für C515C
  33   1        SRELL = 0xBF;
  34   1        BD    = 1;    // Baudratengenerator verwenden
  35   1        TI    = 1;            // TI:   "vorausgegangenes Transmit" beendet
  36   1        }
  37          void timer0(void)
  38          { 
  39   1        TMOD=TMOD&0xF0;
  40   1        TMOD=TMOD|0x01;
  41   1        TF0=0;
  42   1        TR0=1;
  43   1        ET0=1;
  44   1        EAL=1;
  45   1      }
  46          void timer0_int(void)interrupt 1
  47          {
  48   1        TL0=0;  // nur Low-Anteil übertragen
  49   1        TH0=0; // high nach low schieben, dann übertragen
  50   1        count++;
  51   1        if(count==25) // Überprüfen ob 1 Sekunde erreicht wurde
  52   1        { 
  53   2          sec++;  // Sekunde hochzählen
  54   2          count=0;
C51 COMPILER V8.01   TIMER_00_VASILENKO                                                    11/15/2013 12:32:45 PAGE 2   

  55   2          P4_0=P4_0^1;  // LED umschalten (toggle) 
  56   2        }
  57   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     91    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
