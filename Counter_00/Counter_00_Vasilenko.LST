C51 COMPILER V8.01   COUNTER_00_VASILENKO                                                  11/06/2013 09:55:26 PAGE 1   


C51 COMPILER V8.01, COMPILATION OF MODULE COUNTER_00_VASILENKO
OBJECT MODULE PLACED IN Counter_00_Vasilenko.OBJ
COMPILER INVOKED BY: C:\Program Files\Keil3\C51\BIN\C51.EXE Counter_00_Vasilenko.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          //======================================================================================
   2          //               Counter_00
   3          //  Name: Jurij          Vorname: Vasilenko        Klasse: ITAM2     Datum: 6. Nov 2013                   
             -                                               
   4          //======================================================================================
   5          //******************************* Quelltextdateien *************************************
   6          #include <Reg515c.h>            // Definition der Port-Bytes usw.
   7          //********************************** Konstanten ****************************************
   8          //****************************** Funktionsdeklarationen ********************************
   9          void main(void);
  10          void printuintdez(unsigned int x);
  11          void init_seriell(void);
  12          void putchar(char ch);
  13          //******************************** Hauptprogramm ***************************************
  14          int count, countalt=0xFF;
  15          void main(void)
  16          {
  17   1        if(BD == 0)     // Baudratengenerator noch nicht aktiv
  18   1         init_seriell();    // serielle Kommunikation ermöglichen
  19   1        TMOD=TMOD&0xF0;
  20   1        TMOD=TMOD|0x05;
  21   1        TR0=1;
  22   1            
  23   1        while(1)
  24   1        {
  25   2          count=(TH0<<8|TL0);
  26   2          if(count!=countalt)
  27   2          {
  28   3            countalt=count; // aktualisieren
  29   3            // putchar(count+'0'); // Zahlenbereich von 0..9
  30   3            printuintdez(count);
  31   3            putchar('\n');
  32   3          }
  33   2        }
  34   1      }
  35          //***************************** F u n k t i o n e n ************************************
  36          void printuintdez(unsigned int x)
  37          {
  38   1        putchar(x%100000/10000+'0');
  39   1        putchar(x%10000/1000+'0');
  40   1        putchar(x%1000/100+'0');
  41   1        putchar(x%100/10+'0');
  42   1        putchar(x%10+'0');
  43   1      }
  44          void init_seriell(void) 
  45            {
  46   1        SCON  = 0x50;   // SCON: mode 1, 8-bit UART, enable rcvr 
  47   1        PCON |= 0x80;         // SMOD Bit setzen 
  48   1        SRELH = 0x03;         // 9600 baud @ 10MHz für C515C
  49   1        SRELL = 0xBF;
  50   1        BD    = 1;    // Baudratengenerator verwenden
  51   1        TI    = 1;            // TI:   "vorausgegangenes Transmit" beendet
  52   1        }
  53          void putchar(char ch)
  54            {
C51 COMPILER V8.01   COUNTER_00_VASILENKO                                                  11/06/2013 09:55:26 PAGE 2   

  55   1        while(TI != 1); // voriges Transmit Ende abwarten
  56   1        TI=0;                 // für nächste Übertragung löschen
  57   1        SBUF=ch;    // Byte der Variablen ch seriell senden
  58   1        }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    200    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
